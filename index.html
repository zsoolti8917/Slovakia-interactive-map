<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Slovakia Districts Interactive Map</title>
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <style>
    .district {
      fill: #ccc;
      stroke: #fff;
      stroke-linejoin: round;
    }
    .district:hover {
      fill: #a00;
      cursor: pointer;
    }
    svg {
      width: 100%;
      height: 100vh;
    }
  </style>
</head>
<body>
  <svg></svg>
  <script>
    // Set the dimensions for the map
    const width = 960;
    const height = 600;

    // Select the SVG element
    const svg = d3.select("svg");

    // Define a projection
    const projection = d3.geoMercator()
      .scale(1) // Scale will be set once we load the GeoJSON
      .translate([0, 0]);

    // Define a path generator
    const path = d3.geoPath()
      .projection(projection);

    // Load the GeoJSON data
    d3.json("districts.geojson").then(geojson => {
      // Compute the bounds of the GeoJSON data and the scale/translate
      const b = path.bounds(geojson),
            s = .95 / Math.max((b[1][0] - b[0][0]) / width, (b[1][1] - b[0][1]) / height),
            t = [(width - s * (b[1][0] + b[0][0])) / 2, (height - s * (b[1][1] + b[0][1])) / 2];

      // Update the projection
      projection.scale(s).translate(t);

      // Draw each district as a path
      svg.selectAll("path")
        .data(geojson.features)
        .enter().append("path")
          .attr("class", "district")
          .attr("d", path)
          .on("click", clicked);

      // Zoom to district on click
      function clicked(d) {
        const centroid = path.centroid(d);
        const x = centroid[0];
        const y = centroid[1];
        svg.selectAll("path").classed("active", false);
        d3.select(this).classed("active", true);
        svg.transition().duration(750).attr("transform", "translate(" + width / 2 + "," + height / 2 + ")scale(2)translate(" + -x + "," + -y + ")");
      }
    });
  </script>
</body>
</html>
